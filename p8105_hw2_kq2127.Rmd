---
title: "p8105_hw2_kq2127"
author: "Kristal Quispe"
date: "9/29/2019"
output: github_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(readxl)
```

## Problem 1

Read and clean Mr. Trash Wheel sheet

```{r}
mtw_data = 
  read_excel(
    path = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "Mr. Trash Wheel",
    range ="A2:N406") %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(sports_balls = as.integer(round(sports_balls)))
 
mtw_data

    
```

Read, clean and combine 2017-2018 Precipitation data

```{r}
precip17_dt = 
  read_excel(
    path = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2017 Precipitation",
    range = "A2:B14") %>% 
  janitor::clean_names() %>% 
  drop_na(total) %>% 
  mutate(year = 2017)

precip17_dt



precip18_dt = 
  read_excel(
    path = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    range = "A2:B14") %>% 
  janitor::clean_names() %>% 
  drop_na(total) %>% 
  mutate(year = 2018)

precip18_dt



precip_dt =
  bind_rows(
    precip17_dt,precip18_dt) %>%
  janitor::clean_names() %>% 
  mutate(month = month.name[month])

precip_dt
```

The mtw_data data set has 344 observations. The most important variables in this data set are dumpster, year, weight_tons, volume_cubic_yards, and sports_balls. The median number of sports balls in a dumpster in 2017 is `r median(pull(filter(mtw_data,year == 2017), sports_balls))`. The precip_dt data set has 24 observations. The most important variables in this data set are year, month and total.  The total precipitation in 2018 is `r sum(pull(precip18_dt, total))` units. 

## Problem 2

```{r}
pm_dt = read_csv(file="./data/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year", "month", "day"), sep = "-") %>% 
  mutate(
    month = month.name[as.numeric(month)],
    year = as.numeric(year)) %>% 
  select(year, month, prez_gop, prez_dem, everything(), -day) %>% 
  pivot_longer(
    prez_gop:prez_dem,
    names_to = "president",
    names_prefix = "prez_",
    values_to = "value") %>% 
  filter(value == 1) %>% 
  select(year, month, president, everything(), -value)

pm_dt

snp_dt = read_csv(file="./data/snp.csv") %>% 
  janitor::clean_names() %>% 
  separate(date, into = c("month", "day", "year"), sep = "/") %>% 
  mutate(
    month = month.name[as.numeric(month)],
    year = as.numeric(year)) %>% 
  select(year, month, everything(), -day)

snp_dt

une_dt = read_csv(file="./data/unemployment.csv") %>% 
  janitor::clean_names() %>% 
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment") %>% 
  mutate(
    month = recode(
      month,
      "jan" = "January",
      "feb" = "February",
      "mar" = "March",
      "apr" = "April",
      "may" = "May",
      "jun" = "June",
      "jul" = "July",
      "aug" = "August",
      "sep" = "September",
      "oct" = "October",
      "nov" = "November",
      "dec" = "December"))

une_dt

fj_dt = left_join(pm_dt, snp_dt, by = c("year", "month"))

pb2_dt = left_join(fj_dt, une_dt, by = c("year", "month"))

pb2_dt
```

## Problem 3

```{r}
babynames_dt = read_csv(file="./data/Popular_Baby_Names.csv") %>% 
  janitor::clean_names() %>% 
  mutate(
    childs_first_name = tolower(childs_first_name),
    ethnicity = recode(ethnicity,
      "ASIAN AND PACI" = "ASIAN AND PACIFIC ISLANDER",
      "BLACK NON HISP" = "BLACK NON HISPANIC",
      "WHITE NON HISP" = "WHITE NON HISPANIC")) %>% 
  distinct()

babynames_dt     

olivia_dt =
  filter(babynames_dt, childs_first_name == "olivia") %>% 
  select (ethnicity, year_of_birth, rank) %>% 
  pivot_wider(names_from = year_of_birth, values_from = rank)

olivia_dt

boy_dt =
  filter(babynames_dt, gender == "MALE", rank == 1) %>% 
  select (ethnicity, year_of_birth, childs_first_name) %>% 
  pivot_wider(names_from = year_of_birth, values_from = childs_first_name)
  
boy_dt

sp_dt = 
  filter(
    babynames_dt, 
    gender == "MALE", 
    ethnicity == "WHITE NON HISPANIC", 
    year_of_birth == 2016 ) %>% 
  ggplot(aes(x = childs_first_name, y = rank)) + geom_point()

sp_dt

```


